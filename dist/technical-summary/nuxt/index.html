<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NUXT | 飞鸿的博客</title>
    <meta name="description" content="我的心路历程">
    <link rel="icon" href="/logo.gif">
    
    <link rel="preload" href="/assets/css/0.styles.68be1f38.css" as="style"><link rel="preload" href="/assets/js/app.003b85de.js" as="script"><link rel="preload" href="/assets/js/4.7894b68d.js" as="script"><link rel="prefetch" href="/assets/js/10.20dacd80.js"><link rel="prefetch" href="/assets/js/11.5f14dbd3.js"><link rel="prefetch" href="/assets/js/12.74980529.js"><link rel="prefetch" href="/assets/js/13.15a612b9.js"><link rel="prefetch" href="/assets/js/14.e908d412.js"><link rel="prefetch" href="/assets/js/15.305d4cfc.js"><link rel="prefetch" href="/assets/js/16.2427e924.js"><link rel="prefetch" href="/assets/js/17.5f8590db.js"><link rel="prefetch" href="/assets/js/18.d1f8d525.js"><link rel="prefetch" href="/assets/js/19.608dc604.js"><link rel="prefetch" href="/assets/js/2.dea66440.js"><link rel="prefetch" href="/assets/js/20.255717a6.js"><link rel="prefetch" href="/assets/js/21.aae459d4.js"><link rel="prefetch" href="/assets/js/3.1c07a31f.js"><link rel="prefetch" href="/assets/js/5.d798c8ed.js"><link rel="prefetch" href="/assets/js/6.62276278.js"><link rel="prefetch" href="/assets/js/7.8dcf2eb5.js"><link rel="prefetch" href="/assets/js/8.c9cc1096.js"><link rel="prefetch" href="/assets/js/9.f258e96d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.68be1f38.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">飞鸿的博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的资源</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.imooc.com/article/261756" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端学习路线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/resource/" class="nav-link">全栈学习资源</a></li></ul></div></div><div class="nav-item"><a href="/reprint/" class="nav-link">优文转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technical-summary/mongo/" class="nav-link">mongo</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/vue-webpack/" class="nav-link">vue-webpack</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/vue-component/" class="nav-link">Vue.js 组件精讲</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/ubuntu/" class="nav-link">ubuntu</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/eslint/" class="nav-link">eslint</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/nuxt/" class="nav-link router-link-exact-active router-link-active">nuxt</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/github/" class="nav-link">github</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuejs官方文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">每日总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daliy-summary/2019/1/" class="nav-link">2019.1</a></li><li class="dropdown-item"><!----> <a href="/daliy-summary/2019/2/" class="nav-link">2019.2</a></li></ul></div></div><div class="nav-item"><a href="/graduation-project/" class="nav-link">毕业设计</a></div><div class="nav-item"><a href="/video-summary/" class="nav-link">视频总结</a></div><div class="nav-item"><a href="/guyi-item/" class="nav-link">谷逸项目</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的资源</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.imooc.com/article/261756" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端学习路线
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/resource/" class="nav-link">全栈学习资源</a></li></ul></div></div><div class="nav-item"><a href="/reprint/" class="nav-link">优文转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/technical-summary/mongo/" class="nav-link">mongo</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/vue-webpack/" class="nav-link">vue-webpack</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/vue-component/" class="nav-link">Vue.js 组件精讲</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/ubuntu/" class="nav-link">ubuntu</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/eslint/" class="nav-link">eslint</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/nuxt/" class="nav-link router-link-exact-active router-link-active">nuxt</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/github/" class="nav-link">github</a></li><li class="dropdown-item"><!----> <a href="/technical-summary/es6/" class="nav-link">es6</a></li><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuejs官方文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">每日总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daliy-summary/2019/1/" class="nav-link">2019.1</a></li><li class="dropdown-item"><!----> <a href="/daliy-summary/2019/2/" class="nav-link">2019.2</a></li></ul></div></div><div class="nav-item"><a href="/graduation-project/" class="nav-link">毕业设计</a></div><div class="nav-item"><a href="/video-summary/" class="nav-link">视频总结</a></div><div class="nav-item"><a href="/guyi-item/" class="nav-link">谷逸项目</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>NUXT</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/technical-summary/nuxt/#nuxt教程" class="sidebar-link">nuxt教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technical-summary/nuxt/#nuxt特性" class="sidebar-link">Nuxt特性</a></li><li class="sidebar-sub-header"><a href="/technical-summary/nuxt/#nuxt目录结构" class="sidebar-link">Nuxt目录结构</a></li><li class="sidebar-sub-header"><a href="/technical-summary/nuxt/#nuxt路由" class="sidebar-link">Nuxt路由</a></li></ul></li><li><a href="/technical-summary/nuxt/#问题：-nodemon-app-crashed-waiting-for-file-changes-before-starting" class="sidebar-link">问题：[nodemon] app crashed - waiting for file changes before starting...</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="nuxt"><a href="#nuxt" aria-hidden="true" class="header-anchor">#</a> NUXT</h1> <h2 id="nuxt教程"><a href="#nuxt教程" aria-hidden="true" class="header-anchor">#</a> nuxt教程</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue init nuxt-community/starter-template &lt;project-name&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>随着现在vue和react的流行，许多网站都做成了SPA，确实提升了用户体验，
但SPA也有两个弱点，就是SEO和首屏渲染速度。为了解决单页应用的痛点，
基于vue和react的服务端渲染应运而生。由于公司的框架采用的是vue，
所以就简单的研究了一下基于vue的服务端渲染框架——NUXT。
在vue的官网有关于服务端渲染的详细介绍，
而NUXT集成了利用Vue开发服务端渲染的应用所需要的各种配置，
也集成了Vue2、vue-router、vuex、vux-meta（管理页面meta信息的），
利用官方的脚手架，基本上是傻瓜式操作，不用写路由配置，
不用写webpcak配置就可以跑起来一个基于服务端渲染的SPA。</p> <h3 id="nuxt特性"><a href="#nuxt特性" aria-hidden="true" class="header-anchor">#</a> Nuxt特性</h3> <p>NUXT的特性包括：</p> <ul><li>基于 Vue.js</li> <li>自动代码分层</li> <li>服务端渲染</li> <li>强大的路由功能，支持异步数据</li> <li>静态文件服务</li> <li>ES6/ES7 语法支持</li> <li>打包和压缩 JS 和 CSS</li> <li>HTML头部标签管理</li> <li>本地开发支持热加载</li> <li>集成ESLint</li> <li>列表项目</li> <li>支持各种样式预处理器： SASS、LESS、 Stylus等等</li></ul> <h3 id="nuxt目录结构"><a href="#nuxt目录结构" aria-hidden="true" class="header-anchor">#</a> Nuxt目录结构</h3> <p>通过</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue init nuxt-community/starter-template &lt;project-name&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>生成的文件目录结构如下：</p> <p><img src="/assets/img/nuxt1.907e0c13.png" alt="avatar"></p> <p>其中有一些目录（layouts、pages、static、store、nuxt.config.js、package.json）是Nuxt保留的，不可以更改，需要注意一下。</p> <h3 id="nuxt路由"><a href="#nuxt路由" aria-hidden="true" class="header-anchor">#</a> Nuxt路由</h3> <p>Nuxt中的一大特点就是路由无需手动配置，会根据pages下的文件路径自动生成一套路由。如果路由中需要带参数，只需将pages下的文件已下划线_作为前缀即可。例如pages下的目录结构如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pages/
--| user/
-----| index.vue
-----| one.vue
-----| _id.vue
--| index.vue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Nuxt自动生成的路由配置为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>router: {
  routes: [
    {
      name: 'index',
      path: '/',
      component: 'pages/index.vue'
    },
    {
      name: 'user',
      path: '/user',
      component: 'pages/user/index.vue'
    },
    {
      name: 'user-one',
      path: '/user/one',
      component: 'pages/user/one.vue'
    },
    {
      name: 'users-id',
      path: '/users/:id?',
      component: 'pages/users/_id.vue'
    },
  ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>而在vue文件中可以针对路由的参数进行校验，例如在pages/users/_id.vue文件中</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>export default {
  validate ({ params }) {
    // Must be a number
    return /^\d+$/.test(params.id)
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果校验方法返回的值不为 true， Nuxt 将自动加载显示 404 错误页面。而这个错误页面需要写在指定的位置，也就是layout中error页面。接下来就来介绍有关视图相关的东西。
Nuxt视图
可以在layouts目录下创建自定义的布局，可以通过更改 layouts/default.vue 文件来扩展应用的默认布局。需要在布局文件中添加 <nuxt></nuxt> 组件用于显示页面的主体内容，感觉跟vue中的slot方法类似。例如在默认布局中增加header和footer，这样每个页面都会加上header和footer。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;header&gt;VUE SRR DEMO&lt;/header&gt;
    &lt;nuxt/&gt;
    &lt;footer&gt;COPYRIGHT LXY&lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>而上面说到的error页面，可以通过在layouts下增加error.vue文件来修改默认的错误页面。该页面可以接受一个error参数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;h1 v-if=&quot;error.statusCode === 404&quot;&gt;页面不存在&lt;/h1&gt;
    &lt;h1 v-else&gt;应用发生错误异常&lt;/h1&gt;
    &lt;p class=&quot;goback&quot;&gt;
      &lt;nuxt-link to=&quot;/&quot;&gt;返回首页&lt;/nuxt-link&gt;
    &lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ['error'],
  layout: 'self-aside'
}
&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>也可以给某个页面指定特定的模板，做到个性化布局。例如在上面的error页面中，我指定了一个self-aside的模板
以上所说的都是有关布局和路由相关的东西，而还没有讲到有关服务端渲染的知识，究竟 Nuxt 是如何做到SSR的呢，关键人物要出场了。
Nuxt asyncData 方法
Nuxt 扩展了 Vue.js，增加了一个叫 asyncData 的方法，使得我们可以在设置组件的数据之前能异步获取或处理数据。这个函数可了不得了，有了它，我们可以先从服务员拿到数据，在服务端解析好，拼成HTML字符串，返回给浏览器。
asyncData方法会在组件每次加载之前被调用，它可以在服务端或路由更新之前被调用。 可以利用 asyncData方法来获取数据，Nuxt 会将 asyncData 返回的数据融合组件 data 方法返回的数据一并返回给当前组件。这个方法只能用在页面组件中，在componets下在公共组件是不能调用该方法的，Nuxt 不会扩展增强该目录下 Vue 组件。
因为 asyncData 方法是在组件 初始化 前被调用的，所以在方法内是没有办法通过 this 来引用组件的实例对象。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>async asyncData ({ params, error }) {
    const { data } = await axios.get('https://jsonplaceholder.typicode.com/users')
    return { 
      users: data.slice(0,5)
    }
  },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面demo中asyncData返回的数据赋值给了users，这样我就可以在页面中像使用data里的数据一样去使用users，例如我在template下循环出users</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;ul&gt;
    &lt;li v-for=&quot;item in users&quot; :key=&quot;item.name&quot;&gt;{{item.name}}&lt;/li&gt;
 &lt;/ul&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我现在去查看源代码，发现页面中li中的数据已经渲染过来了，
。</p> <p>附一张Nuxt渲染的流程图：
<img src="/assets/img/nuxt2.e67ed509.png" alt="avatar"></p> <h2 id="问题：-nodemon-app-crashed-waiting-for-file-changes-before-starting"><a href="#问题：-nodemon-app-crashed-waiting-for-file-changes-before-starting" aria-hidden="true" class="header-anchor">#</a> 问题：[nodemon] app crashed - waiting for file changes before starting...</h2> <p>问题：[nodemon] app crashed - waiting for file changes before starting...
等你改完之后重启
<img src="/assets/img/nuxt3.fbaf303d.png" alt="avatar"></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/15/2019, 2:08:02 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.003b85de.js" defer></script><script src="/assets/js/4.7894b68d.js" defer></script>
  </body>
</html>
