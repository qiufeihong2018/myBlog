(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{179:function(s,e,t){s.exports=t.p+"assets/img/nuxt1.907e0c13.png"},180:function(s,e,t){s.exports=t.p+"assets/img/nuxt2.e67ed509.png"},181:function(s,e,t){s.exports=t.p+"assets/img/nuxt3.fbaf303d.png"},205:function(s,e,t){"use strict";t.r(e);var n=[function(){var s=this.$createElement,e=this._self._c||s;return e("h1",{attrs:{id:"nuxt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nuxt","aria-hidden":"true"}},[this._v("#")]),this._v(" NUXT")])},function(){var s=this.$createElement,e=this._self._c||s;return e("h2",{attrs:{id:"nuxt教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nuxt教程","aria-hidden":"true"}},[this._v("#")]),this._v(" nuxt教程")])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("vue init nuxt-community/starter-template <project-name>\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"nuxt特性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nuxt特性","aria-hidden":"true"}},[this._v("#")]),this._v(" Nuxt特性")])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ul",[t("li",[s._v("基于 Vue.js")]),s._v(" "),t("li",[s._v("自动代码分层")]),s._v(" "),t("li",[s._v("服务端渲染")]),s._v(" "),t("li",[s._v("强大的路由功能，支持异步数据")]),s._v(" "),t("li",[s._v("静态文件服务")]),s._v(" "),t("li",[s._v("ES6/ES7 语法支持")]),s._v(" "),t("li",[s._v("打包和压缩 JS 和 CSS")]),s._v(" "),t("li",[s._v("HTML头部标签管理")]),s._v(" "),t("li",[s._v("本地开发支持热加载")]),s._v(" "),t("li",[s._v("集成ESLint")]),s._v(" "),t("li",[s._v("列表项目")]),s._v(" "),t("li",[s._v("支持各种样式预处理器： SASS、LESS、 Stylus等等")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"nuxt目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nuxt目录结构","aria-hidden":"true"}},[this._v("#")]),this._v(" Nuxt目录结构")])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("vue init nuxt-community/starter-template <project-name>\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[e("img",{attrs:{src:t(179),alt:"avatar"}})])},function(){var s=this.$createElement,e=this._self._c||s;return e("h3",{attrs:{id:"nuxt路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nuxt路由","aria-hidden":"true"}},[this._v("#")]),this._v(" Nuxt路由")])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pages/\n--| user/\n-----| index.vue\n-----| one.vue\n-----| _id.vue\n--| index.vue\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("router: {\n  routes: [\n    {\n      name: 'index',\n      path: '/',\n      component: 'pages/index.vue'\n    },\n    {\n      name: 'user',\n      path: '/user',\n      component: 'pages/user/index.vue'\n    },\n    {\n      name: 'user-one',\n      path: '/user/one',\n      component: 'pages/user/one.vue'\n    },\n    {\n      name: 'users-id',\n      path: '/users/:id?',\n      component: 'pages/users/_id.vue'\n    },\n  ]\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export default {\n  validate ({ params }) {\n    // Must be a number\n    return /^\\d+$/.test(params.id)\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<template>\n  <div>\n    <header>VUE SRR DEMO</header>\n    <nuxt/>\n    <footer>COPYRIGHT LXY</footer>\n  </div>\n</template>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<template>\n  <div class="container">\n    <h1 v-if="error.statusCode === 404">页面不存在</h1>\n    <h1 v-else>应用发生错误异常</h1>\n    <p class="goback">\n      <nuxt-link to="/">返回首页</nuxt-link>\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: [\'error\'],\n  layout: \'self-aside\'\n}\n<\/script>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("async asyncData ({ params, error }) {\n    const { data } = await axios.get('https://jsonplaceholder.typicode.com/users')\n    return { \n      users: data.slice(0,5)\n    }\n  },\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('<ul>\n    <li v-for="item in users" :key="item.name">{{item.name}}</li>\n </ul>\n')])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br")])])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("附一张Nuxt渲染的流程图：\n"),e("img",{attrs:{src:t(180),alt:"avatar"}})])},function(){var s=this.$createElement,e=this._self._c||s;return e("h2",{attrs:{id:"问题：-nodemon-app-crashed-waiting-for-file-changes-before-starting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题：-nodemon-app-crashed-waiting-for-file-changes-before-starting","aria-hidden":"true"}},[this._v("#")]),this._v(" 问题：[nodemon] app crashed - waiting for file changes before starting...")])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",[this._v("问题：[nodemon] app crashed - waiting for file changes before starting...\n等你改完之后重启\n"),e("img",{attrs:{src:t(181),alt:"avatar"}})])}],a=t(0),r=Object(a.a)({},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),t("p",[s._v("随着现在vue和react的流行，许多网站都做成了SPA，确实提升了用户体验，\n但SPA也有两个弱点，就是SEO和首屏渲染速度。为了解决单页应用的痛点，\n基于vue和react的服务端渲染应运而生。由于公司的框架采用的是vue，\n所以就简单的研究了一下基于vue的服务端渲染框架——NUXT。\n在vue的官网有关于服务端渲染的详细介绍，\n而NUXT集成了利用Vue开发服务端渲染的应用所需要的各种配置，\n也集成了Vue2、vue-router、vuex、vux-meta（管理页面meta信息的），\n利用官方的脚手架，基本上是傻瓜式操作，不用写路由配置，\n不用写webpcak配置就可以跑起来一个基于服务端渲染的SPA。")]),s._v(" "),s._m(3),s._v(" "),t("p",[s._v("NUXT的特性包括：")]),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),t("p",[s._v("通过")]),s._v(" "),s._m(6),t("p",[s._v("生成的文件目录结构如下：")]),s._v(" "),s._m(7),s._v(" "),t("p",[s._v("其中有一些目录（layouts、pages、static、store、nuxt.config.js、package.json）是Nuxt保留的，不可以更改，需要注意一下。")]),s._v(" "),s._m(8),s._v(" "),t("p",[s._v("Nuxt中的一大特点就是路由无需手动配置，会根据pages下的文件路径自动生成一套路由。如果路由中需要带参数，只需将pages下的文件已下划线_作为前缀即可。例如pages下的目录结构如下：")]),s._v(" "),s._m(9),t("p",[s._v("Nuxt自动生成的路由配置为：")]),s._v(" "),s._m(10),t("p",[s._v("而在vue文件中可以针对路由的参数进行校验，例如在pages/users/_id.vue文件中")]),s._v(" "),s._m(11),t("p",[s._v("如果校验方法返回的值不为 true， Nuxt 将自动加载显示 404 错误页面。而这个错误页面需要写在指定的位置，也就是layout中error页面。接下来就来介绍有关视图相关的东西。\nNuxt视图\n可以在layouts目录下创建自定义的布局，可以通过更改 layouts/default.vue 文件来扩展应用的默认布局。需要在布局文件中添加 "),t("nuxt"),s._v(" 组件用于显示页面的主体内容，感觉跟vue中的slot方法类似。例如在默认布局中增加header和footer，这样每个页面都会加上header和footer。")],1),s._v(" "),s._m(12),t("p",[s._v("而上面说到的error页面，可以通过在layouts下增加error.vue文件来修改默认的错误页面。该页面可以接受一个error参数。")]),s._v(" "),s._m(13),t("p",[s._v("也可以给某个页面指定特定的模板，做到个性化布局。例如在上面的error页面中，我指定了一个self-aside的模板\n以上所说的都是有关布局和路由相关的东西，而还没有讲到有关服务端渲染的知识，究竟 Nuxt 是如何做到SSR的呢，关键人物要出场了。\nNuxt asyncData 方法\nNuxt 扩展了 Vue.js，增加了一个叫 asyncData 的方法，使得我们可以在设置组件的数据之前能异步获取或处理数据。这个函数可了不得了，有了它，我们可以先从服务员拿到数据，在服务端解析好，拼成HTML字符串，返回给浏览器。\nasyncData方法会在组件每次加载之前被调用，它可以在服务端或路由更新之前被调用。 可以利用 asyncData方法来获取数据，Nuxt 会将 asyncData 返回的数据融合组件 data 方法返回的数据一并返回给当前组件。这个方法只能用在页面组件中，在componets下在公共组件是不能调用该方法的，Nuxt 不会扩展增强该目录下 Vue 组件。\n因为 asyncData 方法是在组件 初始化 前被调用的，所以在方法内是没有办法通过 this 来引用组件的实例对象。")]),s._v(" "),s._m(14),t("p",[s._v("上面demo中asyncData返回的数据赋值给了users，这样我就可以在页面中像使用data里的数据一样去使用users，例如我在template下循环出users")]),s._v(" "),s._m(15),t("p",[s._v("我现在去查看源代码，发现页面中li中的数据已经渲染过来了，\n。")]),s._v(" "),s._m(16),s._v(" "),s._m(17),s._v(" "),s._m(18)])},n,!1,null,null,null);e.default=r.exports}}]);